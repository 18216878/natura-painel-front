<div class="main">


  <form [formGroup]="formularioPesquisa" class="example-form">
      <div class="pesquisar">
        <div class="search">
          <mat-form-field appearance="fill" class="mopMatricula"
            color="accent">
            <mat-label>Selecione o Item de Pesquisa</mat-label>
            <mat-select disableRipple ngDefaultControl
              formControlName="selecionado" [ngModel]="selecionado"
              (valueChange)="onSelectId($event)">
              <mat-option *ngFor="let id of identificadores" [value]="id">
                {{id}}</mat-option>
            </mat-select>
            <mat-icon matPrefix>search</mat-icon>
            <mat-hint>Selecione uma opção</mat-hint>
          </mat-form-field>

          <mat-form-field *ngIf="selecionado=='CPF do Solicitante'"
            class="mopMatricula" appearance="fill" color="accent">
            <mat-label>CPF do Solicitante</mat-label>
            <input
              matInput
              placeholder="Digite ou cole aqui o CPF do Solicitante..."
              ngDefaultControl
              mask="000.000.000-00"
              formControlName="nr_documento"
              [(ngModel)]="nr_documento">
            <mat-icon matSuffix>fingerprint</mat-icon>
            <mat-hint>CPF do Solicitante</mat-hint>
          </mat-form-field>

          <mat-form-field *ngIf="selecionado=='CPF do Favorecido'"
            class="mopMatricula" appearance="fill" color="accent">
            <mat-label>CPF do Favorecido</mat-label>
            <input
              matInput
              placeholder="Digite ou cole aqui o CPF do Favorecido..."
              ngDefaultControl
              mask="000.000.000-00"
              formControlName="cpf_favorecido"
              [(ngModel)]="cpf_favorecido">
            <mat-icon matSuffix>fingerprint</mat-icon>
            <mat-hint>CPF do Favorecido</mat-hint>
          </mat-form-field>

        </div>

        <div class="botoes">

          <button
          class="validar"
          mat-raised-button
          [disabled]="(nr_documento=== null || nr_documento=== undefined ||
          nr_documento=== '') && (cpf_favorecido === null || cpf_favorecido ===
          undefined || cpf_favorecido === '')"
          (click)="limpar()"
          color="warn"
          aria-label="Example icon button with a home icon">
          <mat-icon>clear</mat-icon> Limpar
        </button>



            <button
              *ngIf="selecionado=='CPF do Solicitante'"
              class="validar"
              mat-raised-button
              [disabled]="(nr_documento=== null || nr_documento=== undefined ||
              nr_documento=== '')"
              (click)="pesquisarCpfSolicitante(nr_documento)"
              color="accent"
              aria-label="Example icon button with a home icon">
              <mat-icon>search</mat-icon> Pesquisar
            </button>

            <button
              *ngIf="selecionado=='CPF do Favorecido'"
              class="validar"
              mat-raised-button
              [disabled]="(cpf_favorecido === null || cpf_favorecido ===
              undefined || cpf_favorecido === '')"
              (click)="pesquisarCpfFavorecido(cpf_favorecido)"
              color="accent"
              aria-label="Example icon button with a home icon">
              <mat-icon>search</mat-icon> Pesquisar
            </button>

        </div>
      </div>

    </form>


  <div *ngIf="!clickedRows.size">
      <div class="card">
          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Cliente</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">CPF do Solicitante</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Nº da Ocorrência</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Data da Criação</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>

      </div>
      <div class="card">
          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Origem</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Nome do Favorecido</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>


          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">CPF do Favorecido</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Valor</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Banco</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Agência</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Conta</p>
              <p>---</p>
            </mat-card-content>
          </mat-card>
      </div>


  </div>

  <div *ngFor="let clickedRow of clickedRows">
      <div class="card">
          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Cliente</p>
              <p>{{clickedRow.cliente}}</p>
              <p *ngIf="clickedRow.cliente===null">---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">CPF do Solicitante</p>
              <p>{{clickedRow.nr_documento | cpf}}</p>
              <p *ngIf="clickedRow.nr_documento===null">---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Nº da Ocorrência</p>
              <p>{{clickedRow.nr_ocorrencia}}</p>
              <p *ngIf="clickedRow.nr_ocorrencia===null">---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
              <mat-card-content>
                  <p class="title-card">Data da Criação</p>
                  <p>{{clickedRow.data_criacao | date: 'dd/MM/yyyy'}}</p>
                  <p *ngIf="clickedRow.data_criacao===null">---</p>
              </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Origem</p>
              <p>{{clickedRow.origem}}</p>
              <p *ngIf="clickedRow.origem===null">---</p>
            </mat-card-content>
          </mat-card>
      </div>

      <div class="card">
          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Nome do Favorecido</p>
              <p>{{clickedRow.nome_favorecido}}</p>
              <p *ngIf="clickedRow.nome_favorecido===null">---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">CPF do Favorecido</p>
              <p>{{clickedRow.cpf_favorecido | cpf}}</p>
              <p *ngIf="clickedRow.cpf_favorecido===null">---</p>
            </mat-card-content>
          </mat-card>
          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Valor</p>
              <p>{{clickedRow.valor | currency : 'BRL'}}</p>
              <p *ngIf="clickedRow.valor===null">---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Banco</p>
              <p>{{clickedRow.nome_banco}}</p>
              <p *ngIf="clickedRow.nome_banco===null">---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Agência</p>
              <p *ngIf="clickedRow.agencia_digito!==null">{{clickedRow.agencia_numero + ' - ' + clickedRow.agencia_digito}}</p>
              <p *ngIf="clickedRow.agencia_digito===null">{{clickedRow.agencia_numero}}</p>
              <p *ngIf="clickedRow.agencia_numero===null">---</p>
            </mat-card-content>
          </mat-card>

          <mat-card class="card-width">
            <mat-card-content>
              <p class="title-card">Conta</p>
              <p *ngIf="clickedRow.conta_digito!==null">{{clickedRow.conta_numero + ' - ' + clickedRow.conta_digito}}</p>
              <p *ngIf="clickedRow.conta_digito===null">{{clickedRow.conta_numero}}</p>
              <p *ngIf="clickedRow.conta_numero===null">---</p>
            </mat-card-content>
          </mat-card>

      </div>

  </div>

  <div>
    <h2>Total de Solicitações: {{solicitacoes}}</h2>
  </div>

  <div class="container">
      <div class="tabela">

        <div class="spinnerExcel" *ngIf="carregando===true">
          <mat-spinner
              [diameter]="40"
              color="accent"
              *ngIf="carregando===true"></mat-spinner>
          <h3>Carregando...</h3>
      </div>
      <div>
        <table mat-table *ngIf="pesquisa_efetuada===true"
          [dataSource]="tableDataSource" class="mat-elevation-z8 demo-table" matPaginator #paginator>

          <ng-container matColumnDef="cliente">
            <th mat-header-cell *matHeaderCellDef> Cliente </th>
            <td mat-cell *matCellDef="let element"> {{element.cliente}}</td>
          </ng-container>

          <ng-container matColumnDef="nr_documento">
            <th mat-header-cell *matHeaderCellDef> CPF do Solicitante </th>
            <td mat-cell *matCellDef="let element"> {{element.nr_documento | cpf}}</td>
          </ng-container>

          <ng-container matColumnDef="nr_ocorrencia">
            <th mat-header-cell *matHeaderCellDef> Nº da Ocorrência </th>
            <td mat-cell *matCellDef="let element"> {{element.nr_ocorrencia}}</td>
          </ng-container>

          <ng-container matColumnDef="data_criacao">
              <th mat-header-cell *matHeaderCellDef> Data de Criação </th>
              <td mat-cell *matCellDef="let element"> {{element.data_criacao | date: 'dd/MM/yyyy'}}</td>
          </ng-container>

          <ng-container matColumnDef="data_sla">
              <th mat-header-cell *matHeaderCellDef> Data do SLA </th>
              <td mat-cell *matCellDef="let element"> {{element.data_sla | date: 'dd/MM/yyyy'}}</td>
          </ng-container>

          <ng-container matColumnDef="origem">
              <th mat-header-cell *matHeaderCellDef> Origem </th>
              <td mat-cell *matCellDef="let element"> {{element.origem}}</td>
          </ng-container>

          <ng-container matColumnDef="status_atividade">
              <th mat-header-cell *matHeaderCellDef> Status da Atividade </th>
              <td mat-cell *matCellDef="let element"> {{element.status_atividade}}</td>
          </ng-container>

          <ng-container matColumnDef="nome_favorecido">
            <th mat-header-cell *matHeaderCellDef> Nome do Favorecido </th>
            <td mat-cell *matCellDef="let element"> {{element.nome_favorecido}}</td>
          </ng-container>

          <ng-container matColumnDef="endereco_favorecido_rua">
              <th mat-header-cell *matHeaderCellDef> Endereço - Logradouro </th>
              <td mat-cell *matCellDef="let element"> {{element.endereco_favorecido_rua}}</td>
          </ng-container>

          <ng-container matColumnDef="endereco_favorecido_cidade">
              <th mat-header-cell *matHeaderCellDef> Cidade </th>
              <td mat-cell *matCellDef="let element"> {{element.endereco_favorecido_cidade}}</td>
          </ng-container>

          <ng-container matColumnDef="endereco_favorecido_cep">
              <th mat-header-cell *matHeaderCellDef> CEP </th>
              <td mat-cell *matCellDef="let element"> {{element.endereco_favorecido_cep}}</td>
          </ng-container>

          <ng-container matColumnDef="codigo_banco">
              <th mat-header-cell *matHeaderCellDef> Código do Banco </th>
              <td mat-cell *matCellDef="let element"> {{element.codigo_banco}}</td>
          </ng-container>

          <ng-container matColumnDef="nome_banco">
              <th mat-header-cell *matHeaderCellDef> Nome do Banco </th>
              <td mat-cell *matCellDef="let element"> {{element.nome_banco}}</td>
          </ng-container>

          <ng-container matColumnDef="agencia_numero">
              <th mat-header-cell *matHeaderCellDef> Agência </th>
              <td mat-cell *matCellDef="let element"> {{element.agencia_numero}}</td>
          </ng-container>

          <ng-container matColumnDef="agencia_digito">
              <th mat-header-cell *matHeaderCellDef> Dígito Agência </th>
              <td mat-cell *matCellDef="let element"> {{element.agencia_digito}}</td>
          </ng-container>

          <ng-container matColumnDef="conta_numero">
              <th mat-header-cell *matHeaderCellDef> Conta </th>
              <td mat-cell *matCellDef="let element"> {{element.conta_numero}}</td>
          </ng-container>

          <ng-container matColumnDef="conta_digito">
              <th mat-header-cell *matHeaderCellDef> Conta Dígito </th>
              <td mat-cell *matCellDef="let element"> {{element.conta_digito}}</td>
          </ng-container>

          <ng-container matColumnDef="cpf_favorecido">
              <th mat-header-cell *matHeaderCellDef> CPF do Favorecido </th>
              <td mat-cell *matCellDef="let element"> {{element.cpf_favorecido | cpf}}</td>
          </ng-container>

          <ng-container matColumnDef="valor">
              <th mat-header-cell *matHeaderCellDef> Valor do Reembolso </th>
              <td mat-cell *matCellDef="let element"> {{element.valor | currency : 'BRL'}}</td>
          </ng-container>

          <ng-container matColumnDef="base_origem">
              <th mat-header-cell *matHeaderCellDef> Base de Origem </th>
              <td mat-cell *matCellDef="let element"> {{element.base_origem}}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr
              mat-row
              (click)="clickedRows.clear()"
              (click)="clickedRows.add(row)"
              [class.demo-row-is-clicked]="clickedRows.has(row)"
              *matRowDef="let row; columns: displayedColumns;">
          </tr>
        </table>
        <mat-paginator
            [pageSizeOptions]="[10, 15, 20]"
            showFirstLastButtons
            aria-label="Select page of periodic elements"
            color="accent">
        </mat-paginator>

      </div>
      </div>

  </div>

</div>
