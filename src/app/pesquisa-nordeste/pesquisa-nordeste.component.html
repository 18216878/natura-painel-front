<div class="main">
    <div class="title">
        <div>
          <div id="logoavon"></div>
        </div>
        <h1>Pesquisa - {{title}}</h1>
        <div class="menu">
            <h4><mat-icon class="color" matSuffix>account_circle</mat-icon> {{user}} </h4>
            <button
                routerLink="/home"
                class="logout"
                color="accent"
                mat-button ><mat-icon>arrow_back</mat-icon>Voltar</button>
        </div>
    </div>
    <p class="space"> </p>

    <form [formGroup]="formularioPesquisaNordeste" class="example-form">
        <div class="pesquisar">
            <div class="search">
                <mat-form-field class="codigoCn" appearance="fill" color="accent">
                    <mat-label>Código da CN</mat-label>
                    <input
                    matInput
                    placeholder="Digite o Código da CN"
                    ngDefaultControl
                    maxlength="20"
                    formControlName="codigo_cn"
                    [(ngModel)]="codigo_cn"
                    >
                    <mat-icon matSuffix>account_circle</mat-icon>
                    <mat-hint>Código da Consultora</mat-hint>
                </mat-form-field>
            </div>
            <div class="botoes">

                <button
                class="validar"
                mat-raised-button
                (click)="limpar()"
                color="warn"
                aria-label="Example icon button with a home icon">
                    <mat-icon>clear</mat-icon> Limpar
                </button>

                <button
                class="validar"
                mat-raised-button
                (click)="carregar()"
                color="accent"
                aria-label="Example icon button with a home icon">
                    <mat-icon>search</mat-icon> Pesquisar
                </button>
            </div>
        </div>

        

  </form>

  <div class="container">

    <table mat-table *ngIf="pesquisa_efetuada===true" [dataSource]="dataSource" class="mat-elevation-z8 demo-table">

        <ng-container matColumnDef="numero_pedido">
          <th mat-header-cell *matHeaderCellDef> Nº Pedido </th>
          <td mat-cell *matCellDef="let element"> {{element.numero_pedido}} </td>
        </ng-container>
      
        <ng-container matColumnDef="codigo_cn">
          <th mat-header-cell *matHeaderCellDef> Código da CN </th>
          <td mat-cell *matCellDef="let element"> {{element.codigo_cn}} </td>
        </ng-container>
      
        <ng-container matColumnDef="nome_cn">
          <th mat-header-cell *matHeaderCellDef> Nome da CN </th>
          <td mat-cell *matCellDef="let element"> {{element.nome_cn}} </td>
        </ng-container>
      
        <ng-container matColumnDef="data">
          <th mat-header-cell *matHeaderCellDef> Data do Pedido </th>
          <td mat-cell *matCellDef="let element"> {{element.data | date : 'dd/MM/yyyy'}} </td>
        </ng-container>

        <ng-container matColumnDef="numero_nota_fiscal">
          <th mat-header-cell *matHeaderCellDef> Nº Nota Fiscal </th>
          <td mat-cell *matCellDef="let element"> {{element.numero_nota_fiscal}} </td>
        </ng-container>

        <ng-container matColumnDef="aumento_pto">
          <th mat-header-cell *matHeaderCellDef> Aumento PTO </th>
          <td mat-cell *matCellDef="let element"> {{element.aumento_pto}} </td>
        </ng-container>

        <ng-container matColumnDef="aumento_reais">
          <th mat-header-cell *matHeaderCellDef> Aumento Reais </th>
          <td mat-cell *matCellDef="let element"> {{element.aumento_reais | currency : 'BRL'}} </td>
        </ng-container>

        <ng-container matColumnDef="limite_atual">
          <th mat-header-cell *matHeaderCellDef> Limite Atual </th>
          <td mat-cell *matCellDef="let element"> {{element.limite_atual | currency : 'BRL'}} </td>
        </ng-container>

        <ng-container matColumnDef="qtde_vale_pontos">
          <th mat-header-cell *matHeaderCellDef> Qtde Vale Pontos </th>
          <td mat-cell *matCellDef="let element"> {{element.qtde_vale_pontos}} </td>
        </ng-container>

        <ng-container matColumnDef="acao">
          <th mat-header-cell *matHeaderCellDef> Ação </th>
          <td mat-cell *matCellDef="let element"> {{element.acao}} </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
            mat-row
            (click)="clickedRows.add(row)"
            [class.demo-row-is-clicked]="clickedRows.has(row)"
            *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
</div>

<div *ngIf="!clickedRows.size">
  <form *ngFor="let clickedRow of clickedRows">

    <mat-form-field class="mopMatricula" appearance="fill" color="primary">
      <mat-label>Nº Pedido</mat-label>
      <input matInput
      readonly="true"
      value="{{clickedRow.numero_pedido}}"
      >
      <mat-icon matSuffix>account_circle</mat-icon>
      <mat-hint>Código da CN (Natura)</mat-hint>
    </mat-form-field>

  </form>
</div>



</div>
